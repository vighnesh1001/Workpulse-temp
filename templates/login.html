{% extends 'base.html' %}
{% block content %}
  <div class="auth-card">
    <h2>Login</h2>
    <form method="post" novalidate>
      {{ form.hidden_tag() }}
      <div class="form-row">
        {{ form.email.label }}
        {{ form.email(size=32, placeholder='you@example.com') }}
        {% for err in form.email.errors %}<div class="field-error">{{ err }}</div>{% endfor %}
      </div>

      <div class="form-row">
        {{ form.password.label }}
        <div class="password-row">
          {{ form.password(placeholder='Your password') }}
          <button type="button" id="togglePwd" class="link-like">Show</button>
        </div>
        {% for err in form.password.errors %}<div class="field-error">{{ err }}</div>{% endfor %}
      </div>

      <div class="form-row">
        {{ form.submit(class_='btn') }}
      </div>
    </form>
    <p class="muted">Don't have an account? <a href="{{ url_for('register') }}">Register</a></p>
  </div>

  <script>
    const toggle = document.getElementById('togglePwd');
    if (toggle) {
      toggle.addEventListener('click', () => {
        const pwd = document.querySelector('input[type=password]');
        if (!pwd) return;
        if (pwd.type === 'password') { pwd.type = 'text'; toggle.textContent = 'Hide'; }
        else { pwd.type = 'password'; toggle.textContent = 'Show'; }
      });
    }
  </script>
{% endblock %}